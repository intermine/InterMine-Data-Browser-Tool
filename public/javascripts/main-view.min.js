function handleCurrentClassFilter(n){$("#sidebarUl").prepend('<li class="nav-item" data-toggle="tooltip" data-placement="right" title="'+n+'" id="'+n+'FilterLi"><a class="nav-link" data-toggle="collapse" href="#'+n+'SearchCardBlock" aria-controls="'+n+'SearchCardBlock" style="color:black;"><i class="fa fa-fw fa-eye"></i><span class="nav-link-text"></span>'+n+'</a><div class="card" style="width: 100%;"><div class="collapse card-block" id="'+n+'SearchCardBlock" style="overflow: auto;"><div class="ul list-group list-group-flush" id="'+n+'FilterList"></div><form-group class="ui-front"><input class="form-control" type="text" id="'+n+'SearchInput" placeholder="Search input..."/><select class="form-control" id="'+n+'SearchTypeSelector" style="width: 100%;"><option value="LOOKUP">LOOKUP identifier(s)</option><option value="IN">IN list</option><option value="NOTIN">NOT IN list</option></select><button class="btn btn-success" type="button" style="width:100%;" id="'+n+'SearchButton">Go!</button><button class="btn btn-secondary" type="button" style="width:100%;" id="'+n+'ResetButton">Reset</button></form-group></div></div></li>'),$("#"+n+"SearchButton").click(function(){showPreloader(),window.currentClassViewFilter&&clearCurrentClassViewConstraint();var e=$("#"+n+"SearchInput").val(),t=$("#"+n+"SearchTypeSelector").val();window.currentClassViewFilter=[],e&&("LOOKUP"===t&&(window.imTable.query.addConstraint({path:n,op:"LOOKUP",value:e,extraValue:""}),window.currentClassViewFilter.push(window.imTable.query.constraints[window.imTable.query.constraints.length-1])),"IN"===t&&(window.imTable.query.addConstraint({path:n,op:"IN",value:e}),window.currentClassViewFilter.push(window.imTable.query.constraints[window.imTable.query.constraints.length-1])),"NOTIN"===t&&(window.imTable.query.addConstraint({path:n,op:"NOT IN",value:e}),window.currentClassViewFilter.push(window.imTable.query.constraints[window.imTable.query.constraints.length-1])))}),$("#"+n+"ResetButton").click(function(){window.currentClassViewFilter&&clearCurrentClassViewConstraint(),$("#"+n+"SearchInput").val("")})}function initializeViewButtons(){for(var o=sessionStorage.getItem("currentClassView"),s=["Gene","Protein"],e=0;e<s.length;e++)o===s[e]?$("#headerButtons").append('<a href="#" data-toggle="tooltip" title="Change to '+s[e]+' view"><button class="btn btn-primary btn-space" id="'+s[e]+'Button" type="button">'+s[e]+"</button></a>"):$("#headerButtons").append('<a href="#" data-toggle="tooltip" title="Change to '+s[e]+' view"><button class="btn btn-default btn-space" id="'+s[e]+'Button" type="button">'+s[e]+"</button></a>"),$("#"+s[e]+"Button").click(function(e){sessionStorage.setItem("currentClassView",String(this.id).split("Button")[0]),location.reload()});var t=escapeMineURL(window.mineUrl);"/"!=t.slice(-1)&&(t+="/"),t+="model?format=json",$.when(getMineModel(t)).done(function(e){var t=JSON.parse(JSON.stringify(e.model.classes)),n=[];for(var a in t)n.push(t[a]);for(var i=0;i<n.length;i++)n[i].tags.includes("im:preferredBagType")&&!s.includes(n[i].name)&&(o===n[i].name?$("#headerButtons").append('<a href="#" data-toggle="tooltip" title="Change to '+n[i].name+' view"><button class="btn btn-primary btn-space" id="'+n[i].name+'Button" type="button">'+n[i].name+"</button></a>"):$("#headerButtons").append('<a href="#" data-toggle="tooltip" title="Change to '+n[i].name+' view"><button class="btn btn-default btn-space" id="'+n[i].name+'Button" type="button">'+n[i].name+"</button></a>"),$("#"+n[i].name+"Button").click(function(e){sessionStorage.setItem("currentClassView",String(this.id).split("Button")[0]),location.reload()}))}),localStorage.getItem("view-manager")||localStorage.setItem("view-manager","[]");var n=JSON.parse(localStorage.getItem("view-manager"));if(findElementJSONarray(n,"mine",window.selectedMineName)){var a=findElementJSONarray(n,"mine",window.selectedMineName);if(a.viewNames){var i=a.viewNames.split(",");for(e=0;e<i.length;e++)o===i[e]?$("#headerButtons").append('<a href="#" data-toggle="tooltip" title="Change to '+i[e]+' view"><button class="btn btn-primary btn-space" id="'+i[e]+'Button" type="button">'+i[e]+"</button></a>"):$("#headerButtons").append('<a href="#" data-toggle="tooltip" title="Change to '+i[e]+' view"><button class="btn btn-default btn-space" id="'+i[e]+'Button" type="button">'+i[e]+"</button></a>"),$("#"+i[e]+"Button").click(function(e){sessionStorage.setItem("currentClassView",String(this.id).split("Button")[0]),location.reload()})}}}function handleResponsiveness(){var t=$(window).width();if(t<992){var e=$("#navbarResponsive").height();t<770?$("body.fixed-nav").css("padding-top",e+75):$("body.fixed-nav").css("padding-top",e+56)}else $("body.fixed-nav").css("padding-top","56px");$(window).on("resize",function(){if($(this).width()!=t)if((t=$(this).width())<992){var e=$("#navbarResponsive").height();t<770?$("body.fixed-nav").css("padding-top",e+75):$("body.fixed-nav").css("padding-top",e+56)}else $("body.fixed-nav").css("padding-top","56px")})}function clearCurrentClassViewConstraint(){for(var e=0;e<window.currentClassViewFilter.length;e++)try{window.imTable.query.removeConstraint(window.currentClassViewFilter[e])}catch(e){continue}window.currentClassViewFilter=null}function checkForHTTPS(){window.location.protocol.includes("https")&&$("#navbarResponsive").prepend("<div class='alert' id='httpsAlert'>You are currently viewing the HTTPS website. Due to security limitations, we are unable to show results from HTTP-only InterMines. You may be able to see more results if you <a href='http://im-browser-prototype.herokuapp.com/'>reload this site</a> via HTTP, and/or allow unsafe scripts to run.</div><br/>")}function hidePreloader(){$("#preloader").css("display","none"),$("nav").css("display","flex"),$(".content-wrapper").css("display","block")}function showPreloader(){$("#preloader").css("display","flex"),$("nav").css("display","none"),$(".content-wrapper").css("display","none")}window.onload=function(){},$(document).ready(function(){sessionStorage.getItem("currentClassView")||sessionStorage.setItem("currentClassView","Gene");var e=sessionStorage.getItem("currentClassView");checkForHTTPS(),initializeViewButtons(),handleResponsiveness(),handleCurrentClassFilter(e),document.title=e+" in HumanMine",$("#proteinsButton").removeClass("btn-primary").addClass("btn-default"),$("#genesButton").removeClass("btn-default").addClass("btn-primary");var t={root:window.mineUrl.replace(/COLON/g,":").replace(/SLASH/g,"/"),token:getSessionToken()},n={select:["*"],from:e};imtables.configure({TableCell:{PreviewTrigger:"click"}}),imtables.configure("TableResults.CacheFactor",20);imtables.loadDash("#dataTable",{start:0,size:25},{service:t,query:n}).then(function(t){t.children.table.on("rendered",function(e){hidePreloader(),document.title=sessionStorage.getItem("currentClassView")+" in "+window.selectedMineName,updateElements(t.history.currentQuery.constraints,"PieChart"),updateGeneLengthChart(t.history.currentQuery.constraints,"GeneLengthChart")}),window.imTable=t.children.table},function(e){console.error("Could not load table",e)})});